// File: console.fallback.js
if("undefined"==typeof console||"undefined"==typeof console.log||"undefined"==typeof console.warn){var console={};console.log=function(){},console.warn=function(){}}
// File: generalPopup.js
function bindEscape(a,b){$(document).keyup(function(c){27==c.which&&($(b,a).click(),$(".emailSent").removeClass(".emailSent"))})}function showAnimatedPopup(){$("#overlayUserAuth").css({position:"fixed",opacity:0}).removeClass("emailSent myForgotPassword signingPopup").center().show();var a=$("#overlayUserAuth").fixedPosition();$("#overlayUserAuth").css("top",-450).css("opacity",1),$("#overlayUserAuth").animate({top:a.top},200)}function showOverlay(){$("#generalOverlay").show()}function hideOverlay(){$("#generalOverlay").hide(),$(".guidelinesBoxWrapper, .guidelinesBoxWrapperAbove").css("margin-left","")}function showPopup(a,b){showOverlay(),$("#"+a).removeClass("displayNone signingPopup").show(),b&&$("#"+a).center()}function hidePopup(a){hideOverlay(),$("#"+a).addClass("displayNone").removeClass("emailSent firstPending"),$("#"+a).hide()}$.fn.center=function(a,b){function c(){this.css("position","fixed"),this.css("top",$(window).height()/2-this.outerHeight()/2),this.css("left",$(window).width()/2-this.outerWidth()/2)}var d=this;return a?$(this).animate({top:$(window).height()/2-this.outerHeight()/2,left:$(window).width()/2-this.outerWidth()/2},a,b):c.call(d),this},$.fn.fixedPosition=function(){var a=this.offset(),b=$(document);return{left:a.left-b.scrollLeft(),top:a.top-b.scrollTop()}};var PopupEvents=function(){var a=function(){$(".genPopup").each(function(){this.hasAttribute&&this.hasAttribute("id")&&window.hidePopup(this.getAttribute("id"))})};$(function(){$(window).keyup(function(b){switch(b.which){case 27:a()}}),$("#generalOverlay").click(function(b){"none"!==$(this).css("display")&&a()})})}();
// File: handlebars.js
var Handlebars={};Handlebars.VERSION="1.0.beta.6",Handlebars.helpers={},Handlebars.partials={},Handlebars.registerHelper=function(a,b,c){c&&(b.not=c),this.helpers[a]=b},Handlebars.registerPartial=function(a,b){this.partials[a]=b},Handlebars.registerHelper("helperMissing",function(a){if(2===arguments.length)return void 0;throw new Error("Could not find property '"+a+"'")});var toString=Object.prototype.toString,functionType="[object Function]";Handlebars.registerHelper("blockHelperMissing",function(a,b){var c=b.inverse||function(){},d=b.fn,e="",f=toString.call(a);if(f===functionType&&(a=a.call(this)),a===!0)return d(this);if(a===!1||null==a)return c(this);if("[object Array]"===f){if(a.length>0)for(var g=0,h=a.length;h>g;g++)e+=d(a[g]);else e=c(this);return e}return d(a)}),Handlebars.registerHelper("each",function(a,b){var c=b.fn,d=b.inverse,e="";if(a&&a.length>0)for(var f=0,g=a.length;g>f;f++)e+=c(a[f]);else e=d(this);return e}),Handlebars.registerHelper("if",function(a,b){var c=toString.call(a);return c===functionType&&(a=a.call(this)),!a||Handlebars.Utils.isEmpty(a)?b.inverse(this):b.fn(this)}),Handlebars.registerHelper("unless",function(a,b){var c=b.fn,d=b.inverse;return b.fn=d,b.inverse=c,Handlebars.helpers["if"].call(this,a,b)}),Handlebars.registerHelper("with",function(a,b){return b.fn(a)}),Handlebars.registerHelper("log",function(a){Handlebars.log(a)});var handlebars=function(){var a={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,INTEGER:29,BOOLEAN:30,hashSegments:31,hashSegment:32,ID:33,EQUALS:34,pathSegments:35,SEP:36,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",29:"INTEGER",30:"BOOLEAN",33:"ID",34:"EQUALS",36:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[27,1],[27,1],[26,1],[31,2],[31,1],[32,3],[32,3],[32,3],[32,3],[21,1],[35,3],[35,1]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return f[h-1];case 2:this.$=new d.ProgramNode(f[h-2],f[h]);break;case 3:this.$=new d.ProgramNode(f[h]);break;case 4:this.$=new d.ProgramNode([]);break;case 5:this.$=[f[h]];break;case 6:f[h-1].push(f[h]),this.$=f[h-1];break;case 7:this.$=new d.InverseNode(f[h-2],f[h-1],f[h]);break;case 8:this.$=new d.BlockNode(f[h-2],f[h-1],f[h]);break;case 9:this.$=f[h];break;case 10:this.$=f[h];break;case 11:this.$=new d.ContentNode(f[h]);break;case 12:this.$=new d.CommentNode(f[h]);break;case 13:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 14:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 15:this.$=f[h-1];break;case 16:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1]);break;case 17:this.$=new d.MustacheNode(f[h-1][0],f[h-1][1],!0);break;case 18:this.$=new d.PartialNode(f[h-1]);break;case 19:this.$=new d.PartialNode(f[h-2],f[h-1]);break;case 20:break;case 21:this.$=[[f[h-2]].concat(f[h-1]),f[h]];break;case 22:this.$=[[f[h-1]].concat(f[h]),null];break;case 23:this.$=[[f[h-1]],f[h]];break;case 24:this.$=[[f[h]],null];break;case 25:f[h-1].push(f[h]),this.$=f[h-1];break;case 26:this.$=[f[h]];break;case 27:this.$=f[h];break;case 28:this.$=new d.StringNode(f[h]);break;case 29:this.$=new d.IntegerNode(f[h]);break;case 30:this.$=new d.BooleanNode(f[h]);break;case 31:this.$=new d.HashNode(f[h]);break;case 32:f[h-1].push(f[h]),this.$=f[h-1];break;case 33:this.$=[f[h]];break;case 34:this.$=[f[h-2],f[h]];break;case 35:this.$=[f[h-2],new d.StringNode(f[h])];break;case 36:this.$=[f[h-2],new d.IntegerNode(f[h])];break;case 37:this.$=[f[h-2],new d.BooleanNode(f[h])];break;case 38:this.$=new d.IdNode(f[h]);break;case 39:f[h-2].push(f[h]),this.$=f[h-2];break;case 40:this.$=[f[h]]}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,33:[1,25],35:24},{17:26,21:23,33:[1,25],35:24},{17:27,21:23,33:[1,25],35:24},{17:28,21:23,33:[1,25],35:24},{21:29,33:[1,25],35:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,33:[1,25],35:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,38],28:[2,38],29:[2,38],30:[2,38],33:[2,38],36:[1,46]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],36:[2,40]},{18:[1,47]},{18:[1,48]},{18:[1,49]},{18:[1,50],21:51,33:[1,25],35:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:52,33:[1,25],35:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:53,27:54,28:[1,41],29:[1,42],30:[1,43],31:39,32:44,33:[1,45],35:24},{18:[2,23]},{18:[2,26],28:[2,26],29:[2,26],30:[2,26],33:[2,26]},{18:[2,31],32:55,33:[1,56]},{18:[2,27],28:[2,27],29:[2,27],30:[2,27],33:[2,27]},{18:[2,28],28:[2,28],29:[2,28],30:[2,28],33:[2,28]},{18:[2,29],28:[2,29],29:[2,29],30:[2,29],33:[2,29]},{18:[2,30],28:[2,30],29:[2,30],30:[2,30],33:[2,30]},{18:[2,33],33:[2,33]},{18:[2,40],28:[2,40],29:[2,40],30:[2,40],33:[2,40],34:[1,57],36:[2,40]},{33:[1,58]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,59]},{18:[1,60]},{18:[2,21]},{18:[2,25],28:[2,25],29:[2,25],30:[2,25],33:[2,25]},{18:[2,32],33:[2,32]},{34:[1,57]},{21:61,28:[1,62],29:[1,63],30:[1,64],33:[1,25],35:24},{18:[2,39],28:[2,39],29:[2,39],30:[2,39],33:[2,39],36:[2,39]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,34],33:[2,34]},{18:[2,35],33:[2,35]},{18:[2,36],33:[2,36]},{18:[2,37],33:[2,37]}],defaultActions:{16:[2,1],37:[2,23],53:[2,21]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l),"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var m,n,o,p,q,r,s,t,u,v={};;){if(o=d[d.length-1],this.defaultActions[o]?p=this.defaultActions[o]:(null==m&&(m=b()),p=g[o]&&g[o][m]),!("undefined"!=typeof p&&p.length&&p[0]||k)){u=[];for(r in g[o])this.terminals_[r]&&r>2&&u.push("'"+this.terminals_[r]+"'");var w="";w=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+u.join(", ")+", got '"+this.terminals_[m]+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==m?"end of input":"'"+(this.terminals_[m]||m)+"'"),this.parseError(w,{text:this.lexer.match,token:this.terminals_[m]||m,line:this.lexer.yylineno,loc:l,expected:u})}if(p[0]instanceof Array&&p.length>1)throw new Error("Parse Error: multiple actions possible at state: "+o+", token: "+m);switch(p[0]){case 1:d.push(m),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(p[1]),m=null,n?(m=n,n=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(s=this.productions_[p[1]][1],v.$=e[e.length-s],v._$={first_line:f[f.length-(s||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(s||1)].first_column,last_column:f[f.length-1].last_column},q=this.performAction.call(v,h,j,i,this.yy,p[1],e,f),"undefined"!=typeof q)return q;s&&(d=d.slice(0,-1*s*2),e=e.slice(0,-1*s),f=f.slice(0,-1*s)),d.push(this.productions_[p[1]][0]),e.push(v.$),f.push(v._$),t=g[d[d.length-2]][d[d.length-1]],d.push(t);break;case 3:return!0}}return!0}},b=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parseError)throw new Error(a);this.yy.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.match+=a,this.matched+=a;var b=a.match(/\n/);return b&&this.yylineno++,this._input=this._input.slice(1),a},unput:function(a){return this._input=a+this._input,this},more:function(){return this._more=!0,this},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c;this._more||(this.yytext="",this.match="");for(var d=this._currentRules(),e=0;e<d.length;e++)if(b=this._input.match(this.rules[d[e]]))return c=b[0].match(/\n.*/g),c&&(this.yylineno+=c.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:c?c[c.length-1].length-1:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,d[e],this.conditionStack[this.conditionStack.length-1]),a?a:void 0;return""===this._input?this.EOF:void this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.performAction=function(a,b,c,d){switch(c){case 0:if("\\"!==b.yytext.slice(-1)&&this.begin("mu"),"\\"===b.yytext.slice(-1)&&(b.yytext=b.yytext.substr(0,b.yyleng-1),this.begin("emu")),b.yytext)return 14;break;case 1:return 14;case 2:return this.popState(),14;case 3:return 24;case 4:return 16;case 5:return 20;case 6:return 19;case 7:return 19;case 8:return 23;case 9:return 23;case 10:return b.yytext=b.yytext.substr(3,b.yyleng-5),this.popState(),15;case 11:return 22;case 12:return 34;case 13:return 33;case 14:return 33;case 15:return 36;case 16:break;case 17:return this.popState(),18;case 18:return this.popState(),18;case 19:return b.yytext=b.yytext.substr(1,b.yyleng-2).replace(/\\"/g,'"'),28;case 20:return 30;case 21:return 30;case 22:return 29;case 23:return 33;case 24:return b.yytext=b.yytext.substr(1,b.yyleng-2),33;case 25:return"INVALID";case 26:return 5}},a.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^[^\x00]{2,}?(?=(\{\{))/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{![\s\S]*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[\/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^true(?=[}\s])/,/^false(?=[}\s])/,/^[0-9]+(?=[}\s])/,/^[a-zA-Z0-9_$-]+(?=[=}\s\/.])/,/^\[[^\]]*\]/,/^./,/^$/],a.conditions={mu:{rules:[3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],inclusive:!1},emu:{rules:[2],inclusive:!1},INITIAL:{rules:[0,1,26],inclusive:!0}},a}();return a.lexer=b,a}();"undefined"!=typeof require&&"undefined"!=typeof exports&&(exports.parser=handlebars,exports.parse=function(){return handlebars.parse.apply(handlebars,arguments)},exports.main=function(a){if(!a[1])throw new Error("Usage: "+a[0]+" FILE");if("undefined"!=typeof process)var b=require("fs").readFileSync(require("path").join(process.cwd(),a[1]),"utf8");else var c=require("file").path(require("file").cwd()),b=c.join(a[1]).read({charset:"utf-8"});return exports.parser.parse(b)},"undefined"!=typeof module&&require.main===module&&exports.main("undefined"!=typeof process?process.argv.slice(1):require("system").args)),Handlebars.Parser=handlebars,Handlebars.parse=function(a){return Handlebars.Parser.yy=Handlebars.AST,Handlebars.Parser.parse(a)},Handlebars.print=function(a){return(new Handlebars.PrintVisitor).accept(a)},Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){}},Handlebars.log=function(a,b){Handlebars.logger.log(a,b)},function(){Handlebars.AST={},Handlebars.AST.ProgramNode=function(a,b){this.type="program",this.statements=a,b&&(this.inverse=new Handlebars.AST.ProgramNode(b))},Handlebars.AST.MustacheNode=function(a,b,c){this.type="mustache",this.id=a[0],this.params=a.slice(1),this.hash=b,this.escaped=!c},Handlebars.AST.PartialNode=function(a,b){this.type="partial",this.id=a,this.context=b};var a=function(a,b){if(a.original!==b.original)throw new Handlebars.Exception(a.original+" doesn't match "+b.original)};Handlebars.AST.BlockNode=function(b,c,d){a(b.id,d),this.type="block",this.mustache=b,this.program=c},Handlebars.AST.InverseNode=function(b,c,d){a(b.id,d),this.type="inverse",this.mustache=b,this.program=c},Handlebars.AST.ContentNode=function(a){this.type="content",this.string=a},Handlebars.AST.HashNode=function(a){this.type="hash",this.pairs=a},Handlebars.AST.IdNode=function(a){this.type="ID",this.original=a.join(".");for(var b=[],c=0,d=0,e=a.length;e>d;d++){var f=a[d];".."===f?c++:"."===f||"this"===f?this.isScoped=!0:b.push(f)}this.parts=b,this.string=b.join("."),this.depth=c,this.isSimple=1===b.length&&0===c},Handlebars.AST.StringNode=function(a){this.type="STRING",this.string=a},Handlebars.AST.IntegerNode=function(a){this.type="INTEGER",this.integer=a},Handlebars.AST.BooleanNode=function(a){this.type="BOOLEAN",this.bool=a},Handlebars.AST.CommentNode=function(a){this.type="comment",this.comment=a}}(),Handlebars.Exception=function(a){var b=Error.prototype.constructor.apply(this,arguments);for(var c in b)b.hasOwnProperty(c)&&(this[c]=b[c]);this.message=b.message},Handlebars.Exception.prototype=new Error,Handlebars.SafeString=function(a){this.string=a},Handlebars.SafeString.prototype.toString=function(){return this.string.toString()},function(){var a={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},b=/&(?!\w+;)|[<>"'`]/g,c=/[&<>"'`]/,d=function(b){return a[b]||"&amp;"};Handlebars.Utils={escapeExpression:function(a){return a instanceof Handlebars.SafeString?a.toString():null==a||a===!1?"":c.test(a)?a.replace(b,d):a},isEmpty:function(a){return"undefined"==typeof a?!0:null===a?!0:a===!1?!0:"[object Array]"===Object.prototype.toString.call(a)&&0===a.length?!0:!1}}}(),Handlebars.Compiler=function(){},Handlebars.JavaScriptCompiler=function(){},function(a,b){a.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,assignToHash:15,pushStringParam:16},a.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:2,lookup:1,invokeMustache:3,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:3,invokePartial:1,push:1,assignToHash:1,pushStringParam:1},a.DISASSEMBLE_MAP={};for(var c in a.OPCODE_MAP){var d=a.OPCODE_MAP[c];a.DISASSEMBLE_MAP[d]=c}a.multiParamSize=function(b){return a.MULTI_PARAM_OPCODES[a.DISASSEMBLE_MAP[b]]},a.prototype={compiler:a,disassemble:function(){for(var b,c,d,e,f,g=this.opcodes,h=[],i=0,j=g.length;j>i;i++)if(b=g[i],"DECLARE"===b)e=g[++i],f=g[++i],h.push("DECLARE "+e+" = "+f);else{d=a.DISASSEMBLE_MAP[b];for(var k=a.multiParamSize(b),l=[],m=0;k>m;m++)c=g[++i],"string"==typeof c&&(c='"'+c.replace("\n","\\n")+'"'),l.push(c);d=d+" "+l.join(" "),h.push(d)}return h.join("\n")},guid:0,compile:function(a,b){this.children=[],this.depths={list:[]},this.options=b;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.program(a)},accept:function(a){return this[a.type](a)},program:function(a){var b,c=a.statements;this.opcodes=[];for(var d=0,e=c.length;e>d;d++)b=c[d],this[b.type](b);return this.isSimple=1===e,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b=(new this.compiler).compile(a,this.options),c=this.guid++;this.usePartial=this.usePartial||b.usePartial,this.children[c]=b;for(var d=0,e=b.depths.list.length;e>d;d++)depth=b.depths.list[d],depth<2||this.addDepth(depth-1);return c},block:function(a){var b,c=a.mustache,d=this.setupStackForMustache(c),e=this.compileProgram(a.program);a.program.inverse&&(b=this.compileProgram(a.program.inverse),this.declare("inverse",b)),this.opcode("invokeProgram",e,d.length,!!c.hash),this.declare("inverse",null),this.opcode("append")},inverse:function(a){var b=this.setupStackForMustache(a.mustache),c=this.compileProgram(a.program);this.declare("inverse",c),this.opcode("invokeProgram",null,b.length,!!a.mustache.hash),this.declare("inverse",null),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;this.opcode("push","{}");for(var e=0,f=d.length;f>e;e++)b=d[e],c=b[1],this.accept(c),this.opcode("assignToHash",b[0])},partial:function(a){var b=a.id;this.usePartial=!0,a.context?this.ID(a.context):this.opcode("push","depth0"),this.opcode("invokePartial",b.original),this.opcode("append")},content:function(a){this.opcode("appendContent",a.string)},mustache:function(a){var b=this.setupStackForMustache(a);this.opcode("invokeMustache",b.length,a.id.original,!!a.hash),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth),this.opcode("lookupWithHelpers",a.parts[0]||null,a.isScoped||!1);for(var b=1,c=a.parts.length;c>b;b++)this.opcode("lookup",a.parts[b])},STRING:function(a){this.opcode("pushString",a.string)},INTEGER:function(a){this.opcode("push",a.integer)},BOOLEAN:function(a){this.opcode("push",a.bool)},comment:function(){},pushParams:function(a){for(var b,c=a.length;c--;)b=a[c],this.options.stringParams?(b.depth&&this.addDepth(b.depth),this.opcode("getContext",b.depth||0),this.opcode("pushStringParam",b.string)):this[b.type](b)},opcode:function(b,c,d,e){this.opcodes.push(a.OPCODE_MAP[b]),void 0!==c&&this.opcodes.push(c),void 0!==d&&this.opcodes.push(d),void 0!==e&&this.opcodes.push(e)},declare:function(a,b){this.opcodes.push("DECLARE"),this.opcodes.push(a),this.opcodes.push(b)},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},setupStackForMustache:function(a){var b=a.params;return this.pushParams(b),a.hash&&this.hash(a.hash),this.ID(a.id),b}},b.prototype={nameLookup:function(a,c,d){return/^[0-9]+$/.test(c)?a+"["+c+"]":b.isValidJavaScriptVariableName(c)?a+"."+c:a+"['"+c+"']"},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":"buffer += "+a+";"},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b||{},this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],aliases:{self:"this"},registers:{list:[]}},this.preamble(),this.stackSlot=0,this.stackVars=[],this.compileChildren(a,b);var e,f=a.opcodes;for(this.i=0,h=f.length;this.i<h;this.i++)e=this.nextOpcode(0),"DECLARE"===e[0]?(this.i=this.i+2,this[e[1]]=e[2]):(this.i=this.i+e[1].length,this[e[0]].apply(this,e[1]));return this.createFunctionContext(d)},nextOpcode:function(b){var c,d,e,f,g=this.environment.opcodes,h=g[this.i+b];if("DECLARE"===h)return c=g[this.i+1],d=g[this.i+2],["DECLARE",c,d];c=a.DISASSEMBLE_MAP[h],e=a.multiParamSize(h),f=[];for(var i=0;e>i;i++)f.push(g[this.i+i+1+b]);return[c,f]},eat:function(a){this.i=this.i+a.length},preamble:function(){var a=[];if(this.useRegister("foundHelper"),this.isChild)a.push("");else{var b=this.namespace,c="helpers = helpers || "+b+".helpers;";this.environment.usePartial&&(c=c+" partials = partials || "+b+".partials;"),a.push(c)}this.environment.isSimple?a.push(""):a.push(", buffer = "+this.initializeBuffer()),this.lastContext=0,this.source=a},createFunctionContext:function(a){var b=this.stackVars;if(this.isChild||(b=b.concat(this.context.registers.list)),b.length>0&&(this.source[1]=this.source[1]+", "+b.join(", ")),!this.isChild){for(var c in this.context.aliases)this.source[1]=this.source[1]+", "+c+"="+this.context.aliases[c]}this.source[1]&&(this.source[1]="var "+this.source[1].substring(2)+";"),this.isChild||(this.source[1]+="\n"+this.context.programs.join("\n")+"\n"),this.environment.isSimple||this.source.push("return buffer;");for(var d=this.isChild?["depth0","data"]:["Handlebars","depth0","helpers","partials","data"],e=0,f=this.environment.depths.list.length;f>e;e++)d.push("depth"+this.environment.depths.list[e]);if(a)return d.push(this.source.join("\n  ")),Function.apply(this,d);var g="function "+(this.name||"")+"("+d.join(",")+") {\n  "+this.source.join("\n  ")+"}";return Handlebars.log(Handlebars.logger.DEBUG,g+"\n\n"),g},appendContent:function(a){this.source.push(this.appendToBuffer(this.quotedString(a)))},append:function(){var a=this.popStack();this.source.push("if("+a+" || "+a+" === 0) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.source.push("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){var a=this.nextOpcode(1),b="";this.context.aliases.escapeExpression="this.escapeExpression","appendContent"===a[0]&&(b=" + "+this.quotedString(a[1][0]),this.eat(a)),this.source.push(this.appendToBuffer("escapeExpression("+this.popStack()+")"+b))},getContext:function(a){this.lastContext!==a&&(this.lastContext=a)},lookupWithHelpers:function(a,b){if(a){var c=this.nextStack();this.usingKnownHelper=!1;var d;!b&&this.options.knownHelpers[a]?(d=c+" = "+this.nameLookup("helpers",a,"helper"),this.usingKnownHelper=!0):b||this.options.knownHelpersOnly?d=c+" = "+this.nameLookup("depth"+this.lastContext,a,"context"):(this.register("foundHelper",this.nameLookup("helpers",a,"helper")),d=c+" = foundHelper || "+this.nameLookup("depth"+this.lastContext,a,"context")),d+=";",this.source.push(d)}else this.pushStack("depth"+this.lastContext)},lookup:function(a){var b=this.topStack();this.source.push(b+" = ("+b+" === null || "+b+" === undefined || "+b+" === false ? "+b+" : "+this.nameLookup(b,a,"context")+");")},pushStringParam:function(a){this.pushStack("depth"+this.lastContext),this.pushString(a)},pushString:function(a){this.pushStack(this.quotedString(a))},push:function(a){this.pushStack(a)},invokeMustache:function(a,b,c){this.populateParams(a,this.quotedString(b),"{}",null,c,function(a,b,c){this.usingKnownHelper||(this.context.aliases.helperMissing="helpers.helperMissing",this.context.aliases.undef="void 0",this.source.push("else if("+c+"=== undef) { "+a+" = helperMissing.call("+b+"); }"),a!==c&&this.source.push("else { "+a+" = "+c+"; }"))})},invokeProgram:function(a,b,c){var d=this.programExpression(this.inverse),e=this.programExpression(a);this.populateParams(b,null,e,d,c,function(a,b,c){this.usingKnownHelper||(this.context.aliases.blockHelperMissing="helpers.blockHelperMissing",this.source.push("else { "+a+" = blockHelperMissing.call("+b+"); }"))})},populateParams:function(a,b,c,d,e,f){var g,h,i=e||this.options.stringParams||d||this.options.data,j=this.popStack(),k=[];if(i?(this.register("tmp1",c),h="tmp1"):h="{ hash: {} }",i){var l=e?this.popStack():"{}";this.source.push("tmp1.hash = "+l+";")}this.options.stringParams&&this.source.push("tmp1.contexts = [];");for(var m=0;a>m;m++)g=this.popStack(),k.push(g),this.options.stringParams&&this.source.push("tmp1.contexts.push("+this.popStack()+");");d&&(this.source.push("tmp1.fn = tmp1;"),this.source.push("tmp1.inverse = "+d+";")),this.options.data&&this.source.push("tmp1.data = data;"),k.push(h),this.populateCall(k,j,b||j,f,"{}"!==c)},populateCall:function(a,b,c,d,e){var f=["depth0"].concat(a).join(", "),g=["depth0"].concat(c).concat(a).join(", "),h=this.nextStack();if(this.usingKnownHelper)this.source.push(h+" = "+b+".call("+f+");");else{this.context.aliases.functionType='"function"';var i=e?"foundHelper && ":"";this.source.push("if("+i+"typeof "+b+" === functionType) { "+h+" = "+b+".call("+f+"); }")}d.call(this,h,g,b),this.usingKnownHelper=!1},invokePartial:function(a){params=[this.nameLookup("partials",a,"partial"),"'"+a+"'",this.popStack(),"helpers","partials"],this.options.data&&params.push("data"),this.pushStack("self.invokePartial("+params.join(", ")+");")},assignToHash:function(a){var b=this.popStack(),c=this.topStack();this.source.push(c+"['"+a+"'] = "+b+";")},compiler:b,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){c=e[f],d=new this.compiler,this.context.programs.push("");var h=this.context.programs.length;c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context)}},programExpression:function(a){if(null==a)return"self.noop";for(var b=this.environment.children[a],c=b.depths.list,d=[b.index,b.name,"data"],e=0,f=c.length;f>e;e++)depth=c[e],1===depth?d.push("depth0"):d.push("depth"+(depth-1));return 0===c.length?"self.program("+d.join(", ")+")":(d.shift(),"self.programWithDepth("+d.join(", ")+")")},register:function(a,b){this.useRegister(a),this.source.push(a+" = "+b+";")},useRegister:function(a){this.context.registers[a]||(this.context.registers[a]=!0,this.context.registers.list.push(a))},pushStack:function(a){return this.source.push(this.nextStack()+" = "+a+";"),"stack"+this.stackSlot},nextStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};for(var e="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),f=b.RESERVED_WORDS={},g=0,h=e.length;h>g;g++)f[e[g]]=!0;b.isValidJavaScriptVariableName=function(a){return!b.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]+$/.test(a)?!0:!1}}(Handlebars.Compiler,Handlebars.JavaScriptCompiler),Handlebars.precompile=function(a,b){b=b||{};var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b);return(new Handlebars.JavaScriptCompiler).compile(d,b)},Handlebars.compile=function(a,b){function c(){var c=Handlebars.parse(a),d=(new Handlebars.Compiler).compile(c,b),e=(new Handlebars.JavaScriptCompiler).compile(d,b,void 0,!0);return Handlebars.template(e)}b=b||{};var d;return function(a,b){return d||(d=c()),d.call(this,a,b)}},Handlebars.VM={template:function(a){var b={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(a,b,c){var d=this.programs[a];return c?Handlebars.VM.program(b,c):d?d:d=this.programs[a]=Handlebars.VM.program(b)},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};return function(c,d){return d=d||{},a.call(b,Handlebars,c,d.helpers,d.partials,d.data)}},programWithDepth:function(a,b,c){var d=Array.prototype.slice.call(arguments,2);return function(c,e){return e=e||{},a.apply(this,[c,e.data||b].concat(d))}},program:function(a,b){return function(c,d){return d=d||{},a(c,d.data||b)}},noop:function(){return""},invokePartial:function(a,b,c,d,e,f){if(options={helpers:d,partials:e,data:f},void 0===a)throw new Handlebars.Exception("The partial "+b+" could not be found");if(a instanceof Function)return a(c,options);if(Handlebars.compile)return e[b]=Handlebars.compile(a),e[b](c,options);throw new Handlebars.Exception("The partial "+b+" could not be compiled when running in runtime-only mode")}},Handlebars.template=Handlebars.VM.template;
// File: hoverMe.js
function getPALData(a,b,c){$.get("/instruments/Service/pal",{article:a,divid:b},function(a){if(a.length>0){var d=$(a);$("#"+b).data("palHtml",$(d).children()),$("#div"+b).length&&$("#div"+b).remove(),$("#"+b).after(a),c()}})}function getOALData(a,b,c){$.post("/news/Service/OALPopup",{article:a,divid:b},function(a){if(a.length>0){var d=$(a);$("#"+b).data("oalHtml",$(d).children()),$("#div"+b).length&&$("#div"+b).remove(),$("#"+b).after(a),c()}})}function getEELData(a,b){$.get("/economic-calendar/EELPopup",{eventID:a},function(a){a.length>0&&b&&b(a)})}function getAQLData(a,b,c,d){$.get("/instruments/Service/aql",{pair:a,divid:b,aql:c},function(a){return a.length>0?($("#div"+b).html(a),$("#"+b).data("innerHtml",a),d&&d(),void 0):"fail"})}$(document).ready(function(){function a(){0==$(".qlTooltip:hover").length?($(".qlTooltip").remove(),$(".marketChart").removeClass("showArrow")):$(".qlTooltip").mouseleave(function(a){$(".qlTooltip").remove(),$(".marketChart").removeClass("showArrow")})}function b(a,b){var c=$(b.target),d=c.offset().top-$(document).scrollTop()-a-85,e=d>0?!0:!1;return e}function c(a){a.preventDefault();var c=$(this).attr("hoverme"),f=$(tooltipContainer),g="pal"==c?600:450,h=b(g,a)?"bottom":"top";switch(f.removeClass("top bottom").addClass(h),$(this).parent().append(f),d=$(this).attr("id"),$(".qlTooltip").attr("id","div"+$(this).attr("id")),$(".marketChart").removeClass("showArrow"),c){case"aql":getAQLData($("#"+d).data("pairid"),$(this).attr("id"),1);break;case"pal":if($("#"+$(this).attr("id")).data("palHtml"))$("#div"+$(this).attr("id")).html($("#"+$(this).attr("id")).data("palHtml"));else{var i="#div"+$(this).attr("id");getPALData($(this).data("articleid"),$(this).attr("id"),function(){$(i).removeClass("top bottom").addClass(h).show()})}break;case"oal":if($("#"+$(this).attr("id")).data("oalHtml"))$("#div"+$(this).attr("id")).html($("#"+$(this).attr("id")).data("oalHtml"));else{var i="#div"+$(this).attr("id");getOALData($(this).data("articleid"),$(this).attr("id"),function(){$(i).removeClass("top bottom").addClass(h).show()})}break;case"eel":var j=function(a){var b=$("#"+d).parent();$("#div"+d).remove();var c=$('<div id="div'+d+'" class="qlTooltip eel '+h+'"></div>');c.append(a),b.append(c)};getEELData($("#"+d).data("eventid"),j);break;case"markets":var k=$(this).attr("id");$("#"+k).data("innerHtml")?$("#div"+k).html($("#"+k).data("innerHtml")):getAQLData($(this).data("pairid"),$(this).attr("id"),0),e=$(this).children(".marketChart"),e.addClass("showArrow"),$(".qlTooltip").show()}}var d,e,f=!1,g=100;$("[hoverme]").mouseenter(function(a){var b=$(a.target).closest("[hoverme]");setTimeout(function(){$(b).is(":hover")&&c.call(b,a)},200)}),$("[hoverme]").mouseleave(function(){f=!0,setTimeout(a,g)})});
// File: myDropDownSelector.js
var DropdownSelector=function(a,b,c,d,e){function f(){$(v).unbind("click").bind("click",function(a){if($(this).is(".groupLI"))return!1;var b=m.selectedDataValue(),c=h($(this));c!=b&&k(c)})}function g(){$(">a>* ",a).one("click.niv",function(b){$(">a>* ",a).off("click.niv"),setTimeout(function(a){q=n=$(">li",u).not(".groupLI").first().outerHeight(),p=$(">li.groupLI",u).length?$(">li.groupLI",u).first().outerHeight():n,o=$(">li",u).not(".groupLI").first().height()},100)})}function h(c,d,e){if(-1==d)return $("a [before-input-element],a [after-input-element]",a).css("opacity",0),$(b).attr("is-valid",!1),null;$("[before-input-element],[after-input-element]",a).css("opacity",""),$(b).attr("is-valid",!0);var f=b.parent(),g=$(c).attr("text")||$(c).text(),h=$(c).attr("data-value");return!e&&$(u).addClass("displayNone"),$(f).length&&($(b).attr("value",g).attr("data-value",h),$("a [before-input-element]",a).replaceWith($(":first",c).clone().attr("before-input-element","")),$("a [after-input-element]",a).replaceWith($(":last",c).clone().attr("after-input-element","")),w=h),$(f).removeClass("searchMode"),h}function i(){$("a [before-input-element],a [after-input-element]",a).css("opacity",""),$(b).attr("is-valid",!0),$(u).addClass("displayNone");var c=$(b).attr("selectedFlag");$(b).removeAttr("placeholder").attr("value",c),b.parent().removeClass("searchMode")}function j(a,b){var c=$.grep(b,function(b,c){return $(b).text().toLowerCase().indexOf(a.toLowerCase())>-1}),d=$.grep(b,function(b,c){return-1==$(b).text().toLowerCase().indexOf(a.toLowerCase())});$(d).addClass("displayNone"),$(c).removeClass("displayNone"),$(u).removeClass("displayNone"),$(c).length==$(b).length?$(r).removeClass("displayNone"):$(r).addClass("displayNone"),0==$(c).length?$(u).addClass("displayNone"):$(u).removeClass("displayNone"),$(u).scrollTop(0)}function k(b){b&&$(a).trigger("dropDownSelected",[a.selector,b])}function l(){$(".js-dropdown").each(function(a){return $(this).attr("id")!=$(u).attr("id")?($("input",$(this).parent()).trigger({type:"keydown",which:9}),void $(this).addClass("displayNone")):void 0})}var m=this;a=$(a),b=$(b),c=c?c:10;var n,o,p,q,r=$(".groupLI",a);d=d||!1,e=e||"Type a currency...";var s=-1,t=-1,u=$(">ul",a),v=$("> li",u),w=null,x=!1,y=v;d&&(w=$(b).attr("data-value")),g(),f(),$(b).bind("click",function(c){return $(this).parent().is(".disabled")?!1:(x=!1,c.stopPropagation(),setTimeout(function(a){$(u).scrollTop(0)},50),s=-1,t=-1,$(this).parent().addClass("searchMode"),d?(i(),$("a [before-input-element],a [after-input-element]",a).css("opacity",0),$(b).attr("is-valid",!1),$(this).attr("placeholder",e).attr("value",""),v.removeClass("displayNone"),$(u).removeClass("displayNone")):($(u).toggleClass("displayNone"),$(u).is(":visible")&&0==$(">li:visible",u).length&&$(u).toggleClass("displayNone")),$(".selected",u).removeClass("selected").removeClass("displayNone"),l(),$(this).focus(),d?!1:void 0)}),$(a).bind("click",function(b){return $(a).is(".disabled")?!1:(x=!1,$(this).removeAttr("placeholder"),b.stopPropagation(),!1)}),$(">a",a).click(function(c){return $(a).is(".disabled")?!1:void $(b).click()}),$(b).bind("keydown",function(e){y=$(">:visible",u);var f=y.length;if(38!=e.which&&40!=e.which)x=!1;else{var g,i;g=$("li:visible:first",u).length?$("li:visible:first",u).offset().top:0,i=$(".selected",u).length?$(".selected",u).offset().top:g,s=Math.abs(parseInt((i-g-$(u).scrollTop())/o))%p}switch(e.which){case 37:case 39:break;case 9:if(d){var l=m.isValidValueOrNotSelected()&&m.selectedDataValue()!=w;m.selectByValue(w);var r=h($('li[data-value="'+w+'"]',u),null,!1);l&&k(r),v.removeClass("displayNone")}break;case 27:$("html").click();break;case 38:if(0==$(u).scrollTop()&&0==s)return!1;if(0==s&&$(".selected",u).length&&$(".selected",u).position().top<$(".selected",u).outerHeight()&&$(".selected",u).position().top<0&&$(u).scrollTop($(u).scrollTop()+$(".selected",u).outerHeight()),$(y[t-1]).is(".groupLI")&&1==t)return!1;if(t>=0&&($(y[t--]).removeClass("selected"),q=$(y[t]).is(".groupLI")?p:n,$(y[t]).is(".groupLI")&&t--,$(y[t]).addClass("selected"),h($(">li:visible:eq("+t+")",u),t,!0),s--,$(".selected",u).position().top<0)){x=!1,s++;var z=$(u).scrollTop();if($(".selected",u).position()){$(u).scrollTop(z-$(".selected",u).position().top),z=$(u).scrollTop();var A=$(".selected",u).position().top;0>A&&$(u).scrollTop(z+A)}$(1>=t&&v[0]).is(".groupLI")&&$(u).scrollTop(0)}return!1;case 40:var B=u[0].scrollHeight-u.outerHeight();if($(u).scrollTop()==B&&(x=!1),f-1>t&&($(y[t++]).removeClass("selected"),q=$(y[t]).is(".groupLI")?p:n,$(y[t]).is(".groupLI")&&t++,$(y[t]).addClass("selected"),h($(">li:visible:eq("+t+")",u),t,!0),s++,s==c)){s--;var z=$(u).scrollTop();$(u).scrollTop(z+$(".selected",u).outerHeight())}break;case 13:if($(u).is(":visible")&&m.isValidValueOrNotSelected()){$(".bottunImageDoubleArrow, .buttonWhiteImageDownArrow",a).click(),m.selectByValue(w);var r=h($('li[data-value="'+w+'"]',u),null,!1);k(r)}break;default:var C=$(b).val(),D=String.fromCharCode(e.which);/[a-zA-Z0-9-_ ]/i.test(D)||(D=""),8==e.which&&(C=C.slice(0,-1)),setTimeout(function(){var c=$(b).val();j(c,v),s=t=-1,$(y).removeClass("selected");var d=$.grep(v,function(a,b){return $(a).text().toLowerCase()==(C+D).toLowerCase()});if(1==y.length){var e=$("li:visible:first",u);d=$(e).text().toLowerCase()==c.toLowerCase()?e:""}if(d.length){if($("a [before-input-element],a [after-input-element]",a).css("opacity",""),$(b).attr("is-valid",!0),1==d.length)return h($(d),null,!1),!1}else $("a [before-input-element],a [after-input-element]",a).css("opacity",0),$(b).attr("is-valid",!1),y.length&&h(null,t)},100)}}),$(".bottunImageDoubleArrow",a).bind("click",function(a){if(d){x=!1,s=-1,t=-1,$(">li",u).removeClass("selected");var c=$(u);$(c).toggleClass("displayNone"),$(u).is(":visible")?$(b).click().focus():m.selectByValue(w)}else $(b).click().focus();return!1}),v.not(".groupLI").hover(function(a){if(x=!0,y=$(">:visible",u),y.length){$(".selected",u).removeClass("selected");var b=$(this).index(),c=$(">li:lt("+b+"):not(:visible)",u).length;t=b-c,$(this).addClass("selected").focus();var d=$("li:visible:first",u).offset().top,e=$(".selected",u).length?$(".selected",u).offset().top:d;s=Math.abs(parseInt((e-d-$(u).scrollTop())/n))%p}}),$(u).on("mousewheel DOMMouseScroll",function(a){var b=function(){var b="DOMMouseScroll"===a.type?-40*a.originalEvent.detail:a.originalEvent.wheelDelta;return b>0?0:1}();return 1===b&&$(u).scrollTop($(u).scrollTop()+q),0===b&&$(u).scrollTop($(u).scrollTop()-q),!1}),$("html").click(function(){return d?(!m.isValidValueOrNotSelected()&&m.selectByValue(w),$(u).addClass("displayNone"),void v.removeClass("displayNone")):($(u).is(":visible")&&0==m.isValidValueOrNotSelected()&&$(b).trigger({type:"keydown",which:13}),void $(u).addClass("displayNone"))});var z=function(){return"false"!=$(b).attr("is-valid")},A=function(){return z?$(b).attr("data-value"):""},B=function(){return $("li[data-value="+A()+"]",a).index()},C=function(b){return $('li[data-value="'+b+'"]',a).click()},D=function(){s=-1,t=-1,u=$(">ul",a),v=$("> li",u),f()},E=function(){return m=new DropdownSelector(a.selector,b.selector,c,d,e)};this.isValidValueOrNotSelected=z,this.selectedDataValue=A,this.selectedIndexElement=B,this.selectByValue=C,this.refresh=D,this.refreshHard=E};
// File: refresher.js
function refresher(a,b,c,d,e,f,g,h,i,j,k,l){pulse=++k||0;var b=b||8e3,m={},n="only_me"==d||"only_me"==e?!1:!0;m.pulse=pulse,m.refresher_version="v1.7.0",m.session_uniq_id=a,m.sideblock_recent_quotes=c,m.sideblock_quotes_exists=d,m.quotes_bar_exists=e,m.economicCalendar_exists=f,m.markets_page_exists=g,m.technical_summary_box_exists=h,m.market_movers_box_exists=i,m.technical_summary_tab_exists=l,m.smlID=j,1==f&&(m.tz=$("#timeZone").val());try{"function"==typeof FPCharts.Utils.enrich_refresher_params&&(m=FPCharts.Utils.enrich_refresher_params(m))}catch(o){}if(d&&(m.sideblock_quotes_selected=$("#quotesBoxWithTabsTop li.selected").attr("id")),e&&("none"!=$("#quotes_bar_layer1").css("display")?m.quotes_bar_selected="1":"none"!=$("#quotes_bar_layer2").css("display")?m.quotes_bar_selected="2":"none"!=$("#quotes_bar_layer3").css("display")&&(m.quotes_bar_selected="3")),c&&(m.PortfolioSideBoxTime=PortfolioSideBoxTime,m.RQSideBoxTime=RQSideBoxTime),"undefined"!=typeof MyPortfolioTime&&(m.MyPortfolioTime=MyPortfolioTime),h&&(m.tsb_activePairs=$("#TSB_ChartWrp").attr("rel"),m.tsb_currentTimeframe=$("#TSB_timeframe").val()),l){var p=null;if("function"==typeof get_user_settings&&(p=get_user_settings()),p){var q=p.split("|");m.tst_activePairs=q[0],m.tst_currentTimeframe=q[1]}}i&&("none"!=$("#MM_tab1").css("display")?m.market_movers_box_curtab="1":"none"!=$("#MM_tab2").css("display")?m.market_movers_box_curtab="2":"none"!=$("#MM_tab3").css("display")&&(m.market_movers_box_curtab="3")),$.ajax({url:"/common/refresher_new/refresher_v13.2.php",type:"GET",data:m,dataType:($.browser.msie,"text"),success:function(k){if(k.length>0){try{var o=JSON.parse(k)}catch(p){return n&&("undefined"!=typeof process&&console.log(r,(process.memoryUsage().heapUsed/1024/1024).toFixed(2),"Mb"),setTimeout(function(){refresher(a,b,c,d,e,f,g,h,i,j,pulse,l)},15e3)),!1}var q,r,s;for(q in o){switch(q){case"newer_version":return void location.reload(!0);case"SBQ":SBQ(o[q]);continue;case"topBarAlertEventsCount":topBarAlertEventsCount(o[q]);continue;case"my_portfolio":portfolio(o[q]);continue;case"my_portfolio_full":portfolio_full(o[q]),MyPortfolioTime=Math.round(+new Date/1e3);continue;case"SB_portfolio_full":$("#portfolio").html(o[q]),PortfolioSideBoxTime=Math.round(+new Date/1e3);continue;case"SB_portfolio":sideBlock_portfolio(o[q]);continue;case"recent_full":$("#recent").html(o[q]),RQSideBoxTime=Math.round(+new Date/1e3);continue;case"recent":sideBlock_recent(o[q]);continue;case"QB":quotesBar(o[q]);continue;case"stocksonlytable":stocksonlytable(o[q]);continue;case"EconomicCalendar":waitForDataDefine=o.watchForNewlyModifiedEvent,economicCalendarRefresh(o[q],o.EconomicCalendarTime);continue;case"technicalSummaryBox":technicalSummaryBoxRefresh(o[q]);continue;case"technicalSummaryTab":technicalSummaryTabRefresh(o[q]);continue;case"marketMoversBox":marketMoversBoxRefresh(o[q],m.market_movers_box_curtab);continue}var t=o[q];for(r in t)if("quotesSummary"!=r){if("flash_chart"!=r)if("js_instrument_chart"!=r){var u=t[r];for(s in u){var v="#"+r+" #pair_"+s,w=u[s];if(w.type)switch(w.type){case"value":$("#"+w.id).html(w.data);break;case"css":$("#"+w.id).removeClass(),$("#"+w.id).addClass(w.data);break;case"style":$("#"+w.id).attr("style",w.data);break;case"style_color":$("#"+w.id).css("color",w.data);break;case"ec_bgColor":w.checkData!=$("#"+w.checkID).html()&&$("#"+w.id).css("background-color",w.data);break;case"clear":var x=document.getElementById(r+"cl_bid"+s),y=document.getElementById(r+"cl_ask"+s),z=document.getElementById(r+"cl_last"+s);if(x&&(x.className=""),y&&(y.className=""),z&&(z.className=""),w.date){var A=document.getElementById(r+"cl_date"+s);A&&(A.innerHTML=w.date)}}else $(v).html(w)}}else try{"function"==typeof FPCharts.Utils.update_charts&&FPCharts.Utils.update_charts(t[r],r)}catch(p){}else if(!FP.fcharts||FP.fcharts[t[r].flash_id].update)try{sendDataToSWF(t[r].flash_id,t[r])}catch(p){}}else $("#quotes_summary_current_data").html(t[r].current_data),$("#quotes_summary_secondary_data").html(t[r].secondary_data),$("#fl_header_pair_chg").html(t[r].fl_header_pair_chg),$("#fl_header_pair_lst").html(t[r].fl_header_pair_lst),$("#fl_header_pair_pch").html(t[r].fl_header_pair_pch+"%"),$("#fl_header_pair_pch").removeClass("redFont").removeClass("greenFont").addClass(t[r].fl_header_pair_clr+"Font"),$("#fl_header_pair_chg").removeClass("redFont").removeClass("greenFont").addClass(t[r].fl_header_pair_clr+"Font")}delete t,delete u,delete q,delete r,delete s,delete v,delete w}n&&setTimeout(function(){refresher(a,b,c,d,e,f,g,h,i,j,pulse,l)},b)},error:function(k,m,n){setTimeout(function(){refresher(a,b,c,d,e,f,g,h,i,j,pulse,l)},15e3)}}),sortTable()}function marketMoversBoxRefresh(a,b){b&&a&&$("#MM_table"+b).empty().append(a)}function tsbRefreshLastValues(a,b){var c;$("#TSB_main_summary_"+a+" #TSB__summary_last_"+a).html(b.last),$("#TSB_main_summary_"+a+" #TSB__summary_change_"+a).removeClass("greenFont redFont").addClass(b.pair_change_color+"Font"),$("#TSB_main_summary_"+a+" #TSB__summary_change_percent_"+a).html(b.pair_change_percent+"%"),$("#TSB_main_summary_"+a+" #TSB__summary_change_value_"+a).html(b.pair_change),$("#TSB_pair_"+a+" td:nth-child(4)").html(b.last),c='<span class="newSiteIconsSprite '+(1==b.actualIsOpen?"green":"red")+'ClockIcon">&nbsp;</span>',$("#TSB_pair_"+a+" td:nth-child(2)").html(c),$("#TSB_main_summary_"+a+" #TSB__arrowBoxSpan_"+a).removeClass("upArrow downArrow noneArrow").addClass(b.arrowBoxClass),b.last_step_direction&&$("#TSB_main_summary_"+a+" #TSB__arrowBoxSpan_"+a).removeClass("upArrow downArrow noneArrow").addClass(b.last_step_direction.toLowerCase()+"Arrow")}function tsbRefreshTechnical(a,b){$("#TSB_pair_"+a+" td:nth-child(5)").html(b.row.ma).removeClass("greenFont redFont neutralFont").addClass(b.row.ma_class),$("#TSB_main_summary_"+a+" #TSB__summary_last_"+a).html(b.row.last),$("#TSB_main_summary_"+a+" #TSB__technical_summary_"+a).html(b.technicalSummary).removeClass("buy sell neutral").addClass(b.technicalSummaryClass),$("#TSB_main_summary_"+a+" #TSB___ma_buy_"+a).html("("+b.maBuy+")"),$("#TSB_main_summary_"+a+" #TSB___ma_sell_"+a).html("("+b.maSell+")"),$("#TSB_main_summary_"+a+" #TSB___ti_buy_"+a).html("("+b.tiBuy+")"),$("#TSB_main_summary_"+a+" #TSB___ti_sell_"+a).html("("+b.tiSell+")"),$("#TSB_main_summary_"+a).attr("rel",b.updateTime)}function technicalSummaryBoxRefresh(a){if(a.hasOwnProperty("lastValues")){var b=JSON.parse(a.lastValues);for(pair_ID in b){var c=b[pair_ID];tsbRefreshLastValues(pair_ID,c)}}if(a.hasOwnProperty("tsb")){var b=JSON.parse(a.tsb);for(pair_ID in b){var c=b[pair_ID];tsbRefreshTechnical(pair_ID,c)}}var d=TSB_getActiveRow(),e=$("#TSB_main_summary_"+d);$("#TSB__mainSummary").empty().append(e.html()),$("#TSB_updateTime").html(e.attr("rel"))}function technicalSummaryTabRefresh(a){for(var b,c,d,e=["redFont","redFont","lightgrayFont","greenFont","greenFont"],f=a.a.length,g=null,h=0;f>h;h++)if(b=a.a[h],c=null,d=$("#tech-sum-symbol-val-"+b.id),b.ar?(c=e[b.ar.cl],d.removeClass("redFont lightgrayFont greenFont").addClass(c),g=b.ar.lv):g=b.lv,d.text(g),b.ma)for(var i=b.ma.length,j=0;i>j;j++)$("#tech-sum-ma_"+b.id+"_"+j.toString()).text(a.t[b.ma[j]]),$("#tech-sum-ti_"+b.id+"_"+j.toString()).text(a.t[b.ti[j]]),c=e[b.ts[j]],g=a.t[b.ts[j]],d=$("#tech-sum-ts_"+b.id+"_"+j.toString()),d.removeClass("redFont lightgrayFont greenFont").addClass(c),d.text(g)}function sortTable(){$("table[tablesorter]").trigger("update")}function SBQ(a){for(id in a){var b="redFont",c="newSiteIconsSprite redClockIcon";a[id].clr&&(b="greenFont"),a[id].clk&&(c="newSiteIconsSprite greenClockIcon"),$("#sb_last_"+id).html(a[id].lst),$("#sb_change_"+id).html(a[id].chg).removeClass().addClass("chg "+b),$("#sb_changepc_"+id).html(a[id].pch).removeClass().addClass("chgPer "+b),$("#sb_clock_"+id).removeClass().addClass(c)}}function portfolio_full(a){for(portfolio_id in a)$("#portfolioData_"+portfolio_id).html(a[portfolio_id]);loadSorter(),PortfolioHelper.sortTable("overview"),$("table[tablesorter_overview]").trigger("update"),PortfolioHelper.sortTable("fundamental"),$("table[tablesorter_fundamental]").trigger("update"),PortfolioHelper.sortTable("technical"),$("table[tablesorter_technical]").trigger("update")}function portfolio(a){var b=new Array("analysisNeutral","redFont","greenFont");for(portfolio_id in a)for(pair_id in a[portfolio_id])1==a[portfolio_id][pair_id].iop?clock="greenClockIcon":clock="redClockIcon",$("#"+portfolio_id+"_isopen_"+pair_id+" span").removeClass("greenClockIcon").removeClass("redClockIcon").addClass(clock),$("#"+portfolio_id+"_last_"+pair_id).removeClass("greenBg").removeClass("redBg").addClass(a[portfolio_id][pair_id].lstBg),$("#"+portfolio_id+"_last_"+pair_id).html(a[portfolio_id][pair_id].lst),$("#"+portfolio_id+"_time_"+pair_id).html(a[portfolio_id][pair_id].tim),a[portfolio_id][pair_id].opn?(color=getRefresherColor(a[portfolio_id][pair_id].clr),$("#"+portfolio_id+"_open_"+pair_id).html(a[portfolio_id][pair_id].opn),$("#"+portfolio_id+"_high_"+pair_id).html(a[portfolio_id][pair_id].h),$("#"+portfolio_id+"_low_"+pair_id).html(a[portfolio_id][pair_id].l),$("#"+portfolio_id+"_chg_"+pair_id).html(a[portfolio_id][pair_id].chg).removeClass("greenFont").removeClass("redFont").addClass(color),$("#"+portfolio_id+"_p_chg_"+pair_id).html(a[portfolio_id][pair_id].pch).removeClass("greenFont").removeClass("redFont").addClass(color)):($("#"+portfolio_id+"_5_"+pair_id).html(a[portfolio_id][pair_id][5]).removeClass("greenFont").removeClass("redFont").removeClass("analysisNeutral").addClass(b[a[portfolio_id][pair_id]["5c"]]),$("#"+portfolio_id+"_10_"+pair_id).html(a[portfolio_id][pair_id][10]).removeClass("greenFont").removeClass("redFont").removeClass("analysisNeutral").addClass(b[a[portfolio_id][pair_id]["10c"]]),$("#"+portfolio_id+"_h_"+pair_id).html(a[portfolio_id][pair_id].h).removeClass("greenFont").removeClass("redFont").removeClass("analysisNeutral").addClass(b[a[portfolio_id][pair_id].hc]),$("#"+portfolio_id+"_d_"+pair_id).html(a[portfolio_id][pair_id].d).removeClass("greenFont").removeClass("redFont").removeClass("analysisNeutral").addClass(b[a[portfolio_id][pair_id].dc]))}function sideBlock_portfolio(a){for(portfolio_id in a)for(pair_id in a[portfolio_id])color=getRefresherColor(a[portfolio_id][pair_id].clr),$("#"+portfolio_id+"_last_"+pair_id).html(a[portfolio_id][pair_id].lst),$("#"+portfolio_id+"_chg_"+pair_id).html(a[portfolio_id][pair_id].chg).removeClass("greenFont").removeClass("redFont").addClass(color),$("#"+portfolio_id+"_p_chg_"+pair_id).html(a[portfolio_id][pair_id].pch).removeClass("greenFont").removeClass("redFont").addClass(color)}function sideBlock_recent(a){for(pair_id in a){var b=a[pair_id].clr;$("#_last_"+pair_id).html(a[pair_id].lst),$("#_chg_"+pair_id).html(a[pair_id].chg).removeClass("greenFont").removeClass("redFont").addClass(b+"Font"),$("#_p_chg_"+pair_id).html(a[pair_id].pch).removeClass("greenFont").removeClass("redFont").addClass(b+"Font")}}function quotesBar(a){for(pair_id in a){$("#qb_pair_last_"+pair_id).html(a[pair_id].lst),$("#qb_pair_change_"+pair_id).html(a[pair_id].pch);var b=a[pair_id].clrText;$("#qb_pair_color_"+pair_id).removeClass("greenFont").removeClass("redFont").addClass(b+"Font");var c=a[pair_id]["tooltip-data"];$("#qb_pair_changeDate_"+pair_id).html(c),$("#qb_pair_"+pair_id).attr("data-tooltip",c)}}function stocksonlytable(a){for(pair_id in a){var b="newSiteIconsSprite redClockIcon";a[pair_id].clk&&(b="newSiteIconsSprite greenClockIcon"),color=getRefresherColor(a[pair_id].clr),$("#stocksonlytable #lst_"+pair_id).html(a[pair_id].lst),$("#stocksonlytable #bid_"+pair_id).html(a[pair_id].bid),$("#stocksonlytable #ask_"+pair_id).html(a[pair_id].ask),$("#stocksonlytable #vlm_"+pair_id).html(a[pair_id].vlm),$("#stocksonlytable #tim_"+pair_id).html(a[pair_id].tim),$("#stocksonlytable #pch_"+pair_id).html(a[pair_id].pch).removeClass("greenFont").removeClass("redFont").addClass(color),$("#stocksonlytable #clk_"+pair_id).removeClass().addClass(b)}}function removeBackgroundColor(a){$(this).removeClass("passedTime"),$(this).unbind("hover",removeBackgroundColor)}function economicCalendarRefresh(a,b){null!=b&&""!=b&&$("#currentTime").html(b);for(idx in a){var c=a[idx].row_ID,d="#eventActual_"+c,e=$(d).html(),f="#eventPrevious_"+c,g=$(f).html();(e!=a[idx].event_actual_formatted&&"string"==typeof a[idx].event_actual_formatted&&0==a[idx].sandclock&&"&nbsp;"!=a[idx].event_actual_formatted||"undefined"!=typeof a[idx].event_previous_formatted&&null!=a[idx].event_previous_formatted&&"&nbsp;"!=a[idx].event_previous_formatted&&a[idx].event_previous_formatted!=g)&&($("#eventRowId_"+c).addClass("passedTime"),$("#eventRowId_"+c).hover(removeBackgroundColor)),1==a[idx].sandclock&&(a[idx].event_actual_formatted=getSandClockString(c,waitForDataDefine)),$(d).html(a[idx].event_actual_formatted),$(d).attr("title",a[idx].event_actual_relative_title),$(d).removeClass("redFont").removeClass("greenFont").removeClass("blackFont").addClass(a[idx].event_actual_relative_font);var h="#eventForecast_"+c;if($(h).html(a[idx].event_forecast_formatted),$(f).html(a[idx].event_previous_formatted),""!=a[idx].event_previous_relative_font){var i=a[idx].event_previous_relative_font;$("#eventPrevious_"+c).removeClass("redFont").removeClass("greenFont").removeClass("blackFont").addClass(i)}var j=a[idx].event_revised_from_title;if(ecUpdateRevised(c,j),$("#eventInfo"+c).is(":visible")){$("#eventInfoActual_"+c).html(a[idx].event_actual_formatted),$("#eventInfoActual_"+c).removeClass("redFont").removeClass("greenFont").removeClass("blackFont").addClass(a[idx].event_actual_relative_font),$("#eventInfoForecast_"+c).html(a[idx].event_forecast_formatted),$("#eventInfoPrevious_"+c).html(a[idx].event_previous_formatted);var k;k="string"==typeof j&&j.length>0?"diamondNewIcon":"diamondNewEmptyIcon",$("#eventInfoRevised_"+c).removeClass("diamondNewEmptyIcon").removeClass("diamondNewIcon").addClass(k),$("#eventInfoRevised_"+c).attr("title",j),$("#eventInfoRelativeArrow_"+c).removeClass("upArrow").removeClass("downArrow").addClass(a[idx].event_actual_relative_arrow)}}}function ecUpdateRevised(a,b){var c="#eventRevisedFrom_"+a,d="#eventRevisedFromSpan_"+a;if("string"==typeof b&&b.length>0)if($(d).is("span"))$(d).attr("title",b);else{var e="";"rtl"==document.dir&&(e="dirRtl"),$(c).html('<span id="eventRevisedFromSpan_'+a+'" class="diamondNewIcon inlineblock '+e+'" title="'+b+'"></span>')}else $(d).is("span")&&$(c).html("&nbsp;")}function getRefresherColor(a){return 1==a?"greenFont":-1==a?"redFont":""}function topBarAlertEventsCount(a){a>0?($("#topBarAlertBadge").html(a).removeClass("displayNone"),$("#topBarAlertBadge").hasClass("block")||$("#topBarAlertBadge").addClass("block"),"undefined"!=typeof topBarPopup&&topBarPopup.refresherCloseEcAlertDropDown()):$("#topBarAlertBadge").removeClass("block").addClass("displayNone")}var pulse;
// File: register.js
function RegistrationClass(a,b){function c(){RegistrationClass.togglePasswordDisplay(b.find("#in_password")),d(),e(),$(".inputWrap INPUT").on("focus",function(){return $(this).parent(".inputWrap").addClass("focus"),!0}).on("blur",function(){return $(this).parent(".inputWrap").removeClass("focus"),!0}),$(document).on("keypress","#loginform  input",function(a){var b=a.keyCode||a.which;13==b&&loginPageFunctions.submitLogin()}),setTimeout(function(){b.find("input").each(function(){var a=$(this);return a.parents(".dropdown").length?!0:a.parent().hasClass("areaCode")?!0:a.parent().hasClass("disabled")?void 0:(a.focus(),!1)})},500),$(document).on("keypress","#signingPopup",function(a){var b=a.keyCode||a.which;13==b&&registrationFormJs.emailSigningUP()}),btnEventList.push("customBtn2")}function d(){$("#countryDropdown").on("dropDownSelected",function(a,c,d){f.clearError();var e=d.split(":"),g=e.length>=2?e[1]:null;g&&b.find("#in_member_phone_area").val(g)})}function e(){b.find("input[id^='in_']").bind("keypress",function(a){var c=a.keyCode||a.which;13==c&&(b.find("#in_member_phone_country").is(":focus")&&b.find("#in_member_phone_country").trigger({type:"keydown",which:9}),$("#signUPBtn").is(":focus")&&registrationFormJs.submit())}),b.find("input").on("focus click",function(){$(this).parent().removeClass("error beigeTooltip");var a=this.id.substr("RegistersiteuserForm_".length)+"Remark";$("#"+a).length>0&&$("#"+a).parent(".inputWrap").removeClass("error beigeTooltip")}),b.find("input").blur(function(){$("#countryDropdown").is(":hover")||(registrationFormJs.clearError(),registrationFormJs.checkInput())}),b.find("in_member_phone_phone").keydown(function(a){-1!==$.inArray(a.keyCode,[46,8,9,27,13,110,190])||65==a.keyCode&&a.ctrlKey===!0||67==a.keyCode&&a.ctrlKey===!0||88==a.keyCode&&a.ctrlKey===!0||a.keyCode>=35&&a.keyCode<=39||(a.shiftKey||a.keyCode<48||a.keyCode>57)&&(a.keyCode<96||a.keyCode>105)&&a.preventDefault()})}var f=this;this.pageMsg=a,this.loader=$("#signingPopup #signup .loader"),this.allElements=$("#signingPopup #signup DIV,#signup A");var g=null,h="/members-admin/auth/register",i="/members-admin/auth/SaveSocial",b=null===b?$(document.createElement("div")):b;this.emailSigningUP=function(){RegistrationClass.reHidePassword(),$("#incompletePopup").remove(),countryDropDown.refreshHard(),g=g||countryDropDown.selectedDataValue(),$("#emailRegistring").hasClass("displayNone")?($("#emailRegistring").removeClass("displayNone").slideDown("slow",function(){$("#signingPopup").center(600)}).removeClass("displayNone"),b.find("#in_user_firstname").focus()):this.checkInput(!0)&&this.submit(h,"RegistersiteuserForm")},this.socialIncompleteForm=function(){this.checkInput(!0)&&this.submit(i,"IncompletedForm")},this.clearform=function(){b.find("#in_user_email").val(""),b.find("#in_password").val(""),b.find("#in_user_firstname").val(""),b.find("#in_user_lastname").val(""),b.find("#in_member_phone_phone").val(""),b.find("#in_termsAndConditions").attr("checked",!1),b.find("#in_broker_agree").attr("checked",!1),this.clearError(),countryDropDown.selectByValue(g),this.clearServerError()},this.clearError=function(){$("#user_emailRemark").removeClass("error beigeTooltip"),$("#user_passwordRemark").removeClass("error beigeTooltip"),$("#user_firstnameRemark").removeClass("error beigeTooltip"),$("#user_lastnameRemark").removeClass("error beigeTooltip"),$("#member_phoneRemark").removeClass("error beigeTooltip"),$("#termsAndConditionsRemark,#broker_agreeRemark").removeClass("error beigeTooltip")},this.clearServerError=function(){$("#registerSigningNotify").html(""),$("#registerSigningNotify").addClass("displayNone")},this.registerError=function(a,b){return void 0==a||void 0==b?!1:(this.clearError(),b.attr("data-tooltip",a),b.addClass("error beigeTooltip"),!1)},this.submit=function(a,b){var c=this.checkInput();return 0==c?!1:(this.register(a,b),!1)},this.checkInput=function(c){function d(a){return c?""!=a:!0}var e=b.find("#in_user_email").val(),f=b.find("#in_password").val(),g=b.find("#in_user_firstname").val(),h=b.find("#in_user_lastname").val(),i=(b.find("#in_member_phone_area").val().replace(/\+/,"")+b.find("#in_member_phone_phone").val(),b.find("#in_member_phone_phone").val()),j=this.getcountrycode(b.find("#in_member_phone_country").attr("data-value"));return(d(g)&&""==g||this.nameValidation(g,this.pageMsg._auth_register_youFirstName,$("#user_firstnameRemark")))&&(d(h)&&""==h||this.nameValidation(h,this.pageMsg._auth_register_youLastName,$("#user_lastnameRemark")))?d(e)&&""==e||validateProfileEmail(e)?b.find("#in_password").length>0&&(!d(f)||""!=f)&&this.validatePassword(f,$("#user_passwordRemark"))?this.registerError(a.login_err_password_2letters_2digits,$("#user_passwordRemark")):d(i)&&""==i||0!=this.phoneValidation(i,j)?0==b.find("#in_termsAndConditions").is(":checked")&&c?this.registerError(a._error_agreed_false,$("#termsAndConditionsRemark")):b.find("#in_broker_agree").length&&0==b.find("#in_broker_agree").is(":checked")&&c?this.registerError(a._error_broker_agreed_false,$("#broker_agreeRemark")):($("#signUPBtn").removeClass("disabled"),!0):this.registerError(a._auth_register_error_validPhone,$("#member_phoneRemark")):this.registerError(a._auth_login_error_validEmailRemark,$("#user_emailRemark")):!1},this.register=function(a,c){var d=new FormData;d.append(c,""),d.append(c+"[user_email]",b.find("#in_user_email").val()),b.find("#in_password").length>0&&d.append(c+"[password]",b.find("#in_password").val()),b.find("#in_socialUser").length>0&&d.append(c+"[userInfo]",b.find("#in_socialUser").val()),d.append(c+"[user_firstname]",b.find("#in_user_firstname").val()),d.append(c+"[user_lastname]",b.find("#in_user_lastname").val()),d.append(c+"[termsAndConditions]",b.find("#in_termsAndConditions").is(":checked")?1:0),d.append(c+"[member_phone_country]",b.find("#in_member_phone_area").val()),d.append(c+"[company_country_ID]",$("#countriesUL").attr("data-value")),d.append(c+"[member_phone_phone]",b.find("#in_member_phone_phone").val()),d.append(c+"[member_phone_country_code]",this.getcountrycode(b.find("#in_member_phone_country").attr("data-value"))),b.find("#in_broker_agree").length?(d.append(c+"[broker_agree]",b.find("#in_broker_agree").is(":checked")?1:0),d.append(c+"[broker_deal_id]",b.find("#in_broker_deal_id").val())):d.append(c+"[broker_agree]",0);var e=this;$.ajax({url:a,type:"POST",data:d,processData:!1,contentType:!1}).done(function(a){var c=JSON.parse(a);switch(c.success){case"0":$("#registerSigningNotify").removeClass("displayNone"),overlay.overlayClose();break;case"1":e.clearServerError(),$("#signingPopup").animate({opacity:"0"},1800),$("#incompletePopup").animate({opacity:"0"},1800),("1"==domainId||"56"==domainId)&&(window._vis_opt_queue=window._vis_opt_queue||[],window._vis_opt_queue.push(function(){_vis_opt_goal_conversion(203)})),b.addClass("displayNone"),overlay.overlayRegisteremailverfivationpopup();break;case"5":if("1"==domainId||"56"==domainId){window._vis_opt_queue=window._vis_opt_queue||[];var d=1;3==c.network&&(d=2),window._vis_opt_queue.push(function(){_vis_opt_register_conversion(d,16)})}""!=c.url?window.location.href=c.url:($("#incompletePopup").animate({opacity:"0"},1800),window.location.reload());break;default:e.clearError(),$("#signingPopup").stop(!1,!1).animate({opacity:"1"},250),$("#registerSigningNotify").html(c.msg),$("#registerSigningNotify").removeClass("displayNone")}}).fail(function(a,b,c){})},this.validatePassword=function(a,b){var c=this.pageMsg.login_err_password_2letters_2digits;if(a.length<4||a.length>15)return 0==this.registerError(c,b);var d=/(.*[0-9].*[0-9])/;return 0==d.test(a)?0==this.registerError(c,b):(d=/(.*[-a-zA-Z].*[-a-zA-Z])/,0==d.test(a)?0==this.registerError(c,b):void 0)},this.getLengthInBytes=function(a){var b=a.match(/[^\x00-\xff]/g);return a.length+(b?b.length:0)},this.nameValidation=function(b,c,d){var e=this.getLengthInBytes(b);if(b.length>16||2>e||""==b.trim())return this.registerError(c,d),!1;var f=/^[^!@#$%$&*)(}{\^]*$/,g=/^[^\d]*$/;return 0==f.test(b)||0==g.test(b)?(this.registerError(a._auth_register_error_nameInvalidChars,d),!1):!0},this.phoneValidation=function(a,b){if(a.length<4||void 0==b||""==b.trim())return!1;var c=!1;return $.ajax({url:"/members-admin/auth/CheckPhone/",type:"POST",data:{phone:a,country:b},async:!1}).done(function(a){"success"==a&&(c=!0)}).fail(function(a,b,c){}),c},this.getcountrycode=function(a){var b=a.split(":");return 3==b.length?b[2]:""},c()}function changePasswordClass(a){var b=this;this.pageMsg=a,this.password=$("#password"),this.password_conf=$("#password_conf"),this.serverErrors=$("#serverErrors"),this.loader=$("#resetpassword #content .loader"),this.allElements=$("#resetpassword #content DIV , A"),this.clearError=function(a){var b=$(a).attr("id");$("#"+b+"_Remark").attr("data-tooltip","").removeClass("error beigeTooltip")},this.validatePassword=function(a,b){if($("i.showPassword:hover").length)return!1;var c=$(b).attr("id");if(a.length<4||a.length>15)return $("#"+c+"_Remark").attr("data-tooltip",this.pageMsg.login_err_password_2letters_2digits).addClass("error beigeTooltip"),!1;var d=/(.*[0-9].*[0-9])/;return 0==d.test(a)?($("#"+c+"_Remark").attr("data-tooltip",this.pageMsg.login_err_password_2letters_2digits).addClass("error beigeTooltip"),!1):(d=/(.*[-a-zA-Z].*[-a-zA-Z])/,0==d.test(a)?($("#"+c+"_Remark").attr("data-tooltip",this.pageMsg.login_err_password_2letters_2digits).addClass("error beigeTooltip"),!1):!0)},this.validateBoth=function(){return this.password.val()!=this.password_conf.val()?($("#password_Remark").attr("data-tooltip")||this.serverErrors.text(this.pageMsg._login_err_passwords_not_match).removeClass("displayNone"),!1):!0},this.changepassword=function(){if(this.validatePassword(this.password.val(),this.password)&&this.validatePassword(this.password_conf.val(),this.password_conf)&&this.validateBoth){this.serverErrors.text("").addClass("displayNone"),this.loader.fadeIn("fast"),this.allElements.animate({opacity:"0.2"},500);var a=$("#ResetpasswordForm"),b="";$.ajax({url:"/members-admin/auth/resetpassword/",dataType:"json",data:a.serialize(),async:!1,type:"POST",success:function(a){switch(a.error){case"0":overlay.overlayPasswordupdated($("#passwordUpdatePopupContainer").html());break;case"1":case"2":window.location.href="/members-admin/login";break;default:b=a.error}}}),this.loader.fadeOut("fast"),this.allElements.animate({opacity:"1"},500),""!=b&&this.serverErrors.text(b).removeClass("displayNone")}};var c=!1;$(document).ready(function(){$("#submitButton").click(function(a){RegistrationClass.reHidePassword(),c=!0;var d=b.validateBoth();d?b.changepassword():c=!1}),$("#password,#password_conf").on("focus click",function(a){b.serverErrors.text("").addClass("displayNone"),b.clearError($(this))}),$("#password,#password_conf").focusout(function(a){return(!c&&""==b.password.val()||b.validatePassword(b.password.val(),b.password))&&(""==b.password_conf.val()||b.validatePassword(b.password_conf.val(),b.password_conf))?void 0:!1}),RegistrationClass.togglePasswordDisplay($("#password")),RegistrationClass.togglePasswordDisplay($("#password_conf"))}),$(".inputWrap INPUT").on("focus",function(){$(this).parent(".inputWrap").addClass("focus")}).on("blur",function(){$(this).parent(".inputWrap").removeClass("focus")})}function loginFunctionsClass(a,b){var c=this;this.divid=a,this.email=$("#"+a+" #loginFormUser_email"),this.password=$("#"+a+" #loginForm_password"),this.passwordNotify=$("#"+a+" #passwordSigningNotify"),this.emailNotify=$("#"+a+" #emailSigningNotify"),this.serverErrors=$("#"+a+" #serverErrors"),this.logintoken=$("#logintoken"),this.loginformid=$("#"+a+"form"),this.pageMsg=b,this.loader=$("#"+a+" #signup .loader"),this.allElements=$("#"+a+" #signup DIV, #signup A"),$(document).on("focus","#loginpage #loginFormUser_email,#loginPopup #loginFormUser_email,#loginForm_password",function(){c.checkInput(),$(this).parent().removeClass("error beigeTooltip")}),this.submitLogin=function(){RegistrationClass.reHidePassword();var a=this.checkInput(!0);return 0==a?!1:(this.validatelogin(),!1)},this.clearform=function(){this.password.val("")},this.clearError=function(){this.passwordNotify.attr("data-tooltip","").removeClass("error beigeTooltip"),this.emailNotify.attr("data-tooltip","").removeClass("error beigeTooltip")},this.validatelogin=function(){var a=this,b=this.email.val(),c=this.password.val(),d=this.logintoken.val();this.serverErrors.text(""),this.loader.fadeIn("fast"),this.allElements.animate({opacity:"0.2"},500);var e="";$.ajax({url:"/members-admin/auth/Ajaxvalidateuserpass/",dataType:"json",data:{email:b,password:c,logintoken:d},async:!1,type:"POST",success:function(b){switch(b.response){case"1":("1"==domainId||"56"==domainId)&&(window._vis_opt_queue=window._vis_opt_queue||[],window._vis_opt_queue.push(function(){_vis_opt_goal_conversion(202)}));case"2":a.loginformid.submit();break;case"0":case"02":case"Not_Approved":default:e=b.msg,a.loader.fadeOut("fast"),a.allElements.animate({opacity:"1"},500),""!=e&&a.serverErrors.text(e).removeClass("displayNone")}}})},this.checkInput=function(a){function b(b){return a?""!=b:!0}var c=!1,d=this.email.val(),e=this.password.val();this.clearError();var f=validateProfileEmail(d);return b(d)&&""==d||f?this.emailNotify.removeClass("error beigeTooltip"):(this.emailNotify.attr("data-tooltip",this.pageMsg.auth_login_error_validEmailRemark).addClass("error beigeTooltip"),c=!0),b(e)&&""==e||!(e.length<3)||c?this.passwordNotify.removeClass("error beigeTooltip"):(this.passwordNotify.attr("data-tooltip",this.pageMsg.login_err_password_2letters_2digits).addClass("error beigeTooltip"),this.passwordNotify.addClass("error beigeTooltip"),c=!0),1==c?!1:!0}}function ForgotPasswordRequest(a,b){function c(){var b=$("#email").val(),c=$("#email").parent(".inputWrap");return 0==validateProfileEmail(b)?void c.attr("data-tooltip",a).addClass("error beigeTooltip"):void $.ajax({url:"/members-admin/auth/AjaxSendResetPassword/",dataType:"json",data:{email:b},async:!1,type:"POST",success:function(a){$("#loadingimage").hide(),"1"==a.response&&(hidePopup("passwordResetRequest"),a.successMsg&&$("#successmsg").html(a.successMsg),overlay.overlayPasswordResetSent($("#emailConfirmPopup").html()))}})}$("#email").focus(function(){$("#email").parent(".inputWrap").removeClass("error beigeTooltip")}),$(".inputWrap INPUT").on("focus",function(){$(this).parent(".inputWrap").addClass("focus")}).on("blur",function(){$(this).parent(".inputWrap").removeClass("focus")}),$("#email").focusout(function(){var b=$("#email").parent(".inputWrap");0==validateProfileEmail($("#email").val())&&b.attr("data-tooltip",a).addClass("error beigeTooltip")}),$("#email").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&c()}),this.submitForgotPassword=c}function OverlayClass(){this.loadhtml=function(a,b){$.ajax({url:a,type:"GET",async:!1}).done(function(a){""!=a&&$("body").append(a)}).then(b)},this.overlaySocialwelcome=function(){var a="/members-admin/auth/socialwelcome";window.location=a},this.overlayLogin=function(a){$("#signingPopup").length&&hidePopup("signingPopup"),showOverlay(),$("#loginPopup").length?(loginFunctions.clearform(),loginFunctions.clearError()):this.loadhtml("/members-admin/login?loginparms="+a,loginFunctionsClass.initLoginPopupScript),this.showFadeInPopupNew("loginPopup")},this.overlayRegister=function(){$("#loginPopup").length&&hidePopup("loginPopup"),showOverlay(),$("#signingPopup").length||this.loadhtml("/members-admin/auth/register",function(){window.renderButtons&&window.renderButtons()}),registrationFormJs.clearform(),$("#emailRegistring").addClass("displayNone"),this.showFadeInPopupNew("signingPopup")},this.overlayPasswordResetSent=function(a){var b=!0;showOverlay();var c=200;this.popupPositionSet("emailConfirmPopup",c,b),this.showFadeInPopupNew("emailConfirmPopup")},this.overlayPasswordupdated=function(a){var b=!0;showOverlay();var c=200;this.popupPositionSet("passwordUpdatePopup",c,b),this.showFadeInPopupNew("passwordUpdatePopup")},this.overlayForgotPassword=function(){$("#loginPopup").length&&hidePopup("loginPopup"),showOverlay(),$("#passwordResetRequest").length||this.loadhtml("/members-admin/auth/passwordresetrequest"),$("#passwordResetRequest").show(),this.showFadeInPopupNew("passwordResetRequest")},this.overlayClose=function(){el_2=document.getElementById("generalOverlay"),el_2.style.display="none"},this.overlayRegisteremailverfivationpopup=function(){this.loadhtml("/members-admin/auth/registeremailverfivationpopup",function(a){hidePopup("signingPopup"),showOverlay(),$("#registrationMailVerify").replaceWith($(a)),$("#registrationMailVerify").center().show(),showOverlay()})},this.overlayincompetedpopup=function(a){var b=$("#incompletePopup");a.length<1||(hidePopup("signingPopup"),hidePopup("loginPopup"),$("#loginPopup").remove(),$("#signingPopup").remove(),showOverlay(),b.length>0?b.replaceWith(a):$("body").append(a),$("#incompletePopup").center().show(),showOverlay())},this.overlayRedirect=function(a){window.location=a},this.overlayRedirectFacebook=function(a){var b=JSON.parse(a);return b.popup?void overlay.overlayincompetedpopup(b.popup):(window.location=b.url,void(-1!==b.url.lastIndexOf("#comment")&&window.location.reload()))},this.facebook_login=function(){window.open("/members-admin/auth/fb/?login=1","mywin","scrollbars=yes,resizable=yes,width=750,height=500,status=yes,toolbar=no,menubar=no","fbreview")},this.popupPositionSet=function(a,b,c){c=c||!1;var d=$(document).height(),e=$(window).height(),f=e-b;f/=2,0>f&&(f=0),$("#generalOverlay").css({height:d+"px"}),$("#"+a).css({top:f+"px"}),c?$("#"+a).css({position:"fixed"}):$("#"+a).css({position:"absolute"})},this.showAnimatedPopupNew=function(a){$("#"+a).css({position:"fixed",opacity:0}).center().show();var b=$("#"+a).fixedPosition();$("#"+a).css("top",-100).css("opacity",1),$("#"+a).animate({top:b.top},100)},this.showFadeInPopupNew=function(a){$("#"+a).css({position:"fixed",opacity:0}).center().show().animate({opacity:1},250),$(window).unbind("resize").resize(function(b){$("#"+a).center(50)})}}var overlay=new OverlayClass,btnEventList=[];RegistrationClass.reHidePassword=function(){$("#password,#password_conf,#loginpage #loginForm_password,#loginPopup #loginForm_password,#in_password").prop("type","password"),$("#password,#password_conf,#loginpage #loginForm_password,#loginPopup #loginForm_password,#in_password").parent().find("i").removeClass("reveal")},RegistrationClass.togglePasswordDisplay=function(a){var b=a.parent().find("i");b.mousedown(function(){return!1}),b.click(function(b){var c=a.attr("type");a.prop("type","text"==c?"password":"text"),$(this).toggleClass("reveal"),a.focus()})};var nameValidationCheckTest=function(){return this.getLengthInBytes=function(a){var b=a.match(/[^\x00-\xff]/g);return a.length+(b?b.length:0)},this.nameValidation=function(a){var b=this.getLengthInBytes(a);if(a.length>16||2>b||""==a.trim())return!1;var c=/^[^!@#$%$&*)(}{\^]*$/,d=/^[^\d]*$/;return 0==c.test(a)||0==d.test(a)?!1:!0},this};loginFunctionsClass.initLoginPage=function(a){$(document).ready(function(){loginPageFunctions=new loginFunctionsClass("loginpage",a),RegistrationClass.togglePasswordDisplay($("#loginpage #loginForm_password")),window.render?window.render("customBtn"):btnEventList.push("customBtn")})},loginFunctionsClass.initLoginPopup=function(a){return btnEventList.push("customBtn1"),window.renderButtons&&window.renderButtons(),new loginFunctionsClass("loginPopup",a)},loginFunctionsClass.initLoginPopupScript=function(){RegistrationClass.togglePasswordDisplay($("#loginPopup #loginForm_password")),$("#loginPopup input").bind("keypress",function(a){var b=a.keyCode||a.which;13==b&&loginFunctions.submitLogin()}),$(".inputWrap INPUT").on("focus",function(){$(this).parent(".inputWrap").addClass("focus")}).on("blur",function(){$(this).parent(".inputWrap").removeClass("focus")})};